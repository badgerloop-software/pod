name: CI

on: [push, pull_request]

jobs:
  build:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v2
    - name: Install GTest
      run: ./deploy.sh gtest-setup
    - name: Build Executables
      run: ./deploy.sh build
    - name: Run Tests
      run: ./out/run_all_tests
    - name: Get Coverage Report
      run: ./deploy.sh codecov
    - name: Upload Coverage
      run:  bash <(curl -s https://codecov.io/bash) 
